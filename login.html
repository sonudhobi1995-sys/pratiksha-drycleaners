<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Pratiksha Dry Cleaners</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@900&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        :root { --sun-orange: #FF8C00; --saturn-blue: #001F3F; --cream-bg: #FFFDD0; }
        body { font-family: 'Inter', sans-serif; background-color: var(--cream-bg); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; overflow: hidden; }
        .login-card { background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; width: 85%; max-width: 380px; border-top: 8px solid var(--sun-orange); }
        .logo { font-family: 'Playfair Display', serif; font-size: 2.2rem; color: var(--sun-orange); margin-bottom: 5px; display: block; font-weight: 900; }
        h2 { font-family: 'Playfair Display', serif; color: var(--saturn-blue); margin: 0 0 10px 0; font-size: 1.5rem; }
        p { color: #666; font-size: 0.9rem; margin-bottom: 20px; }
        input { width: 100%; padding: 12px; margin-bottom: 12px; border: 2px solid #f0f0f0; border-radius: 10px; box-sizing: border-box; font-size: 1rem; outline: none; transition: 0.3s; }
        input:focus { border-color: var(--sun-orange); }
        button { width: 100%; padding: 15px; background: var(--saturn-blue); color: white; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 1.1rem; box-shadow: 0 4px 15px rgba(0,31,63,0.2); transition: 0.3s; }
        button:active { transform: scale(0.98); }
        button:disabled { background: #ccc; }
    </style>
</head>
<body>
    <div class="login-card">
        <span class="logo">‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ</span>
        <h2>‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à!</h2>
        <p>‡§Ö‡§™‡§®‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡•á‡§µ‡§æ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</p>
        <form id="regForm">
            <input type="text" id="userHouse" placeholder="üè† ‡§Æ‡§ï‡§æ‡§® ‡§®‡§Ç‡§¨‡§∞ (‡§ú‡•à‡§∏‡•á: E-82)" required>
            <input type="text" id="userName" placeholder="üë§ ‡§Ü‡§™‡§ï‡§æ ‡§∂‡•Å‡§≠ ‡§®‡§æ‡§Æ" required>
            <input type="tel" id="userMobile" placeholder="üì± ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞ (10 ‡§Ö‡§Ç‡§ï)" pattern="[0-9]{10}" required title="‡§ï‡•É‡§™‡§Ø‡§æ 10 ‡§Ö‡§Ç‡§ï‡•ã‡§Ç ‡§ï‡§æ ‡§®‡§Ç‡§¨‡§∞ ‡§°‡§æ‡§≤‡•á‡§Ç">
            <button type="submit" id="btn">‡§è‡§™‡•ç‡§≤‡•Ä‡§ï‡•á‡§∂‡§® ‡§ñ‡•ã‡§≤‡•á‡§Ç</button>
        </form>
    </div>

    <script>
        // ‡§Ü‡§™‡§ï‡§æ ‡§®‡§Ø‡§æ ‡§î‡§∞ ‡§´‡§æ‡§á‡§®‡§≤ Web App URL (Pratiksha_Digital_Core)
        const scriptURL = 'https://script.google.com/macros/s/AKfycbz_TcYXlB7aoesGZ64PBeY9ODUto39_ph-PdUoKPY6TKBGVTUvleb2mUVlutAC2z56g/exec';

        document.getElementById('regForm').onsubmit = function(e) {
            e.preventDefault();
            const house = document.getElementById('userHouse').value;
            const name = document.getElementById('userName').value;
            const mobile = document.getElementById('userMobile').value;
            const btn = document.getElementById('btn');

            btn.innerText = "‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...";
            btn.disabled = true;

            // ‡§°‡•á‡§ü‡§æ ‡§ï‡•ã Google Sheet (Master Sheet) ‡§Æ‡•á‡§Ç ‡§≠‡•á‡§ú‡§®‡§æ
            fetch(`${scriptURL}?action=register&house=${encodeURIComponent(house)}&name=${encodeURIComponent(name)}&mobile=${mobile}`)
            .then(response => response.text())
            .then(data => {
                // ‡§´‡•ã‡§® ‡§ï‡•Ä ‡§≤‡•ã‡§ï‡§≤ ‡§Æ‡•á‡§Æ‡•ã‡§∞‡•Ä ‡§Æ‡•á‡§Ç ‡§°‡•á‡§ü‡§æ ‡§∏‡•á‡§µ ‡§ï‡§∞‡§®‡§æ ‡§§‡§æ‡§ï‡§ø ‡§¨‡§æ‡§∞-‡§¨‡§æ‡§∞ ‡§≤‡•â‡§ó‡§ø‡§® ‡§® ‡§ï‡§∞‡§®‡§æ ‡§™‡•ú‡•á
                localStorage.setItem('userHouse', house);
                localStorage.setItem('userName', name);
                localStorage.setItem('userMobile', mobile);
                localStorage.setItem('isLoggedIn', 'true');
                
                // ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§™‡•á‡§ú (Index.html) ‡§™‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç
                window.location.href = "index.html";
            })
            .catch(error => {
                // ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§è‡§∞‡§∞ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§≠‡•Ä ‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞ ‡§¶‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§ó‡•ç‡§∞‡§æ‡§π‡§ï ‡§Ö‡§ü‡§ï‡•á ‡§®‡§π‡•Ä‡§Ç
                console.error('Error!', error.message);
                localStorage.setItem('userHouse', house);
                localStorage.setItem('userName', name);
                localStorage.setItem('userMobile', mobile);
                localStorage.setItem('isLoggedIn', 'true');
                window.location.href = "index.html";
            });
        };
    </script>
</body>
</html>
